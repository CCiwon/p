<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Park Sung Hee - Portfolio</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- INTRO -->
    <div id="intro">
      <div class="intro-envelope" id="intro-envelope">
        <!-- 편지지 (봉투 뒤에 숨겨짐) -->
        <div class="letter">
          <div class="letter-edge"></div>
          <div class="letter-inner">
            <div class="letter-header">
              <div class="letter-confidential">CONFIDENTIAL</div>
              <div class="letter-line"></div>
            </div>
            <span class="letter-text">PARK SUNG HEE</span>
            <span class="letter-sub">— PORTFOLIO —</span>
            <div class="letter-footer">
              <div class="letter-line"></div>
              <div class="letter-date">2026</div>
            </div>
            <div class="letter-watermark">PSH</div>
          </div>
        </div>
        <!-- 봉투 뚜껑 (삼각형) -->
        <div class="envelope-flap"></div>
        <!-- 봉투 본체 -->
        <div class="envelope-body">
          <div class="envelope-stain stain-1"></div>
          <div class="envelope-stain stain-2"></div>
          <div class="envelope-stain stain-3"></div>
          <div class="envelope-corner corner-tl">EYES ONLY</div>
          <div class="envelope-corner corner-tr">CASE FILE: 93-X-772</div>
          <div class="envelope-stamp">TOP SECRET</div>
          <div class="envelope-stamp-2">CLASSIFIED</div>
          <div class="envelope-handle-l">HANDLE WITH CARE</div>
          <div class="envelope-handle-r">HANDLE WITH CARE</div>
          <div class="envelope-seal">
            <div class="seal-ring"></div>
            <div class="seal-inner">FBI</div>
          </div>
          <div class="envelope-barcode">
            ||| |||| || ||| || |||| ||| || ||||
          </div>
          <div class="envelope-classified">
            FEDERAL BUREAU OF INVESTIGATION — CLASSIFIED
          </div>
        </div>
      </div>
      <div class="intro-hint">CLICK TO OPEN</div>
    </div>

    <!-- HOME -->
    <section id="home" class="section">
      <div class="page-frame">
        <div class="image-container">
          <img class="page-img" src="image/메인.jpg" alt="Main" />
          <div class="nav-overlay">
            <button class="nav-tab nav-home" data-section="home">
              <img src="image/홈버튼.png" alt="Home" />
            </button>
            <button class="nav-tab nav-portfolio" data-section="portfolio">
              <img src="image/포트폴리오버튼.png" alt="Portfolio" />
            </button>
            <button class="nav-tab nav-about" data-section="about">
              <img src="image/자기소개서버튼.png" alt="About Me" />
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- PORTFOLIO -->
    <section id="portfolio" class="section">
      <div class="page-frame">
        <div class="slides-container">
          <div class="slide active">
            <img
              class="page-img"
              src="image/포트폴리오1.jpg"
              alt="Portfolio 1"
            />
            <button class="portfolio-readmore-btn" data-popup="1">
              <img src="image/더보기버튼.png" alt="Read More" />
            </button>
            <a
              class="portfolio-link-btn"
              href="https://parkggonghi.github.io/taco/"
              target="_blank"
            >
              <img src="image/website.png" alt="Website" />
            </a>
          </div>
          <div class="slide">
            <img
              class="page-img"
              src="image/포트폴리오3.jpg"
              alt="Portfolio 3"
            />
            <button class="portfolio-readmore-btn" data-popup="3">
              <img src="image/더보기버튼.png" alt="Read More" />
            </button>
            <a
              class="portfolio-link-btn"
              href="https://www.figma.com/proto/vh0wOAZZMKT6oCcaP3mkEI/%EB%AA%A8%EB%B0%94%EC%9D%BC%EB%94%94%EC%9E%90%EC%9D%B8-%EA%B0%9C%EC%9D%B8-?node-id=1-2&t=KVHLcCg331u0WcaH-1"
              target="_blank"
            >
              <img src="image/frototype.png" alt="Prototype" />
            </a>
          </div>
          <div class="slide">
            <img
              class="page-img"
              src="image/포트폴리오4.jpg"
              alt="Portfolio 4"
            />
            <button class="portfolio-readmore-btn" data-popup="4">
              <img src="image/더보기버튼.png" alt="Read More" />
            </button>
          </div>
          <div class="slide">
            <img
              class="page-img"
              src="image/포트폴리오2.jpg"
              alt="Portfolio 5"
            />
            <button class="portfolio-readmore-btn" data-popup="5">
              <img src="image/더보기버튼.png" alt="Read More" />
            </button>
          </div>
          <div class="slide">
            <img
              class="page-img"
              src="image/포트폴리오5.jpg"
              alt="Portfolio 6"
            />
            <button class="portfolio-readmore-btn" data-popup="6">
              <img src="image/더보기버튼.png" alt="Read More" />
            </button>
          </div>
          <div class="slide">
            <img
              class="page-img"
              src="image/포트폴리오7.jpg"
              alt="Portfolio 7"
            />
            <button class="portfolio-readmore-btn" data-popup="7">
              <img src="image/더보기버튼.png" alt="Read More" />
            </button>
          </div>
        </div>
        <div class="nav-overlay">
          <button class="nav-tab nav-home" data-section="home">
            <img src="image/홈버튼.png" alt="Home" />
          </button>
          <button class="nav-tab nav-portfolio" data-section="portfolio">
            <img src="image/포트폴리오버튼.png" alt="Portfolio" />
          </button>
          <button class="nav-tab nav-about" data-section="about">
            <img src="image/자기소개서버튼.png" alt="About Me" />
          </button>
        </div>
        <button class="arrow-left">
          <img src="image/왼쪽화살표.png" alt="Previous" />
        </button>
        <button class="arrow-right">
          <img src="image/오른쪽화살표.png" alt="Next" />
        </button>
      </div>
    </section>

    <!-- ABOUT ME -->
    <section id="about" class="section">
      <div class="page-frame">
        <div class="slides-container">
          <div class="slide active">
            <img class="page-img" src="image/자기소개서.jpg" alt="About Main" />
            <button class="readmore-btn">
              <img src="image/readmore.png" alt="Read More" />
            </button>
            <button class="imwhatothersee-btn">
              <img src="image/imwhatothersee.png" alt="I'm what others see" />
            </button>
          </div>
          <div class="slide">
            <img class="page-img" src="image/자기소개서1.jpg" alt="About 1" />
          </div>
          <div class="slide">
            <img class="page-img" src="image/자기소개서2.jpg" alt="About 2" />
          </div>
          <div class="slide">
            <img class="page-img" src="image/자기소개서3.jpg" alt="About 3" />
          </div>
          <div class="slide">
            <img class="page-img" src="image/자기소개서4.jpg" alt="About 4" />
          </div>
          <div class="slide">
            <img
              class="page-img"
              src="image/친구추천서.jpg"
              alt="Recommendation"
            />
          </div>
          <div class="slide">
            <img class="page-img" src="image/마지막.jpg" alt="Last Page" />
          </div>
        </div>
        <div class="nav-overlay">
          <button class="nav-tab nav-home" data-section="home">
            <img src="image/홈버튼.png" alt="Home" />
          </button>
          <button class="nav-tab nav-portfolio" data-section="portfolio">
            <img src="image/포트폴리오버튼.png" alt="Portfolio" />
          </button>
          <button class="nav-tab nav-about" data-section="about">
            <img src="image/자기소개서버튼.png" alt="About Me" />
          </button>
        </div>
        <button class="arrow-left about-arrow" style="display: none">
          <img src="image/왼쪽화살표.png" alt="Previous" />
        </button>
        <button class="arrow-right about-arrow" style="display: none">
          <img src="image/오른쪽화살표.png" alt="Next" />
        </button>
      </div>
    </section>

    <!-- 팝업 모달 -->
    <div id="popup-modal" class="popup-modal">
      <div class="popup-overlay"></div>
      <div class="popup-content">
        <button class="popup-close">&times;</button>
        <img src="" alt="Popup Image" />
      </div>
    </div>

    <script>
      // === Intro Animation ===
      const intro = document.getElementById("intro");
      const introEnvelope = document.getElementById("intro-envelope");

      introEnvelope.addEventListener("click", () => {
        if (!introEnvelope.classList.contains("opened")) {
          introEnvelope.classList.add("opened");
          introEnvelope.classList.add("letter-up");
          setTimeout(() => {
            intro.classList.add("fade-out");
            setTimeout(() => {
              intro.style.display = "none";
              document.getElementById("home").classList.add("active");
            }, 600);
          }, 1200);
        }
      });

      // === Section Navigation ===
      const allNavTabs = document.querySelectorAll(".nav-tab");
      const sections = document.querySelectorAll(".section");

      allNavTabs.forEach((btn) => {
        btn.addEventListener("click", () => {
          const targetId = btn.getAttribute("data-section");
          sections.forEach((sec) => sec.classList.remove("active"));
          const targetSection = document.getElementById(targetId);
          targetSection.classList.add("active");
          // 해당 섹션의 슬라이드를 첫 번째로 리셋
          const slides = targetSection.querySelectorAll(".slide");
          if (slides.length) {
            slides.forEach((s) => s.classList.remove("active"));
            slides[0].classList.add("active");
            if (targetSection.resetSlider) targetSection.resetSlider();
            if (targetSection.id === "about") updateAboutArrows();
          }
        });
      });

      // === Slider Logic ===
      const portfolioSection = document.getElementById("portfolio");

      function setupSlider(section) {
        const slides = section.querySelectorAll(".slide");
        const prevBtn = section.querySelector(".arrow-left");
        const nextBtn = section.querySelector(".arrow-right");
        let currentIndex = 0;

        if (!slides.length) return;

        function updateArrows() {
          if (section === portfolioSection) {
            if (prevBtn)
              prevBtn.style.display = currentIndex === 0 ? "none" : "";
          }
        }

        function showSlide(index) {
          slides.forEach((s) => s.classList.remove("active"));
          slides[index].classList.add("active");
          currentIndex = index;
          updateArrows();
        }

        if (prevBtn)
          prevBtn.addEventListener("click", () => {
            if (currentIndex > 0) showSlide(currentIndex - 1);
          });
        if (nextBtn)
          nextBtn.addEventListener("click", () => {
            if (
              section === portfolioSection &&
              currentIndex === slides.length - 1
            ) {
              // 마지막 슬라이드에서 오른쪽 → 어바웃미 섹션으로 이동
              sections.forEach((sec) => sec.classList.remove("active"));
              document.getElementById("about").classList.add("active");
              updateAboutArrows();
              return;
            }
            if (currentIndex < slides.length - 1) showSlide(currentIndex + 1);
          });

        section.navigateSlider = (dir) => {
          if (dir === "left") prevBtn && prevBtn.click();
          if (dir === "right") nextBtn && nextBtn.click();
        };

        section.resetSlider = () => {
          currentIndex = 0;
          updateArrows();
        };

        updateArrows();
      }

      sections.forEach((sec) => {
        if (sec.querySelector(".slides-container")) setupSlider(sec);
      });

      // === 마우스 휠로 슬라이드 넘기기 ===
      let wheelCooldown = false;
      document.addEventListener("wheel", (e) => {
        if (wheelCooldown) return;
        if (popupModal.classList.contains("active")) return;
        const active = document.querySelector(".section.active");
        if (active && active.navigateSlider) {
          if (e.deltaY > 0) active.navigateSlider("right");
          if (e.deltaY < 0) active.navigateSlider("left");
          wheelCooldown = true;
          setTimeout(() => {
            wheelCooldown = false;
          }, 500);
        }
      });

      // === Keyboard ===
      document.addEventListener("keydown", (e) => {
        const active = document.querySelector(".section.active");
        if (active && active.navigateSlider) {
          if (e.key === "ArrowLeft") active.navigateSlider("left");
          if (e.key === "ArrowRight") active.navigateSlider("right");
        }
      });

      // === About Me 버튼 ===
      const readmoreBtn = document.querySelector(".readmore-btn");
      const imwhatotherseeBtn = document.querySelector(".imwhatothersee-btn");

      if (readmoreBtn) {
        readmoreBtn.addEventListener("click", () => {
          sections.forEach((sec) => sec.classList.remove("active"));
          document.getElementById("portfolio").classList.add("active");
        });
      }

      // === About 화살표 표시/숨김 ===
      const aboutSection = document.getElementById("about");
      const aboutArrows = aboutSection.querySelectorAll(".about-arrow");
      const aboutLeftArrow = aboutSection.querySelector(".arrow-left");
      const aboutRightArrow = aboutSection.querySelector(".arrow-right");

      function updateAboutArrows() {
        const slides = aboutSection.querySelectorAll(".slide");
        let activeIndex = 0;
        slides.forEach((s, i) => {
          if (s.classList.contains("active")) activeIndex = i;
        });

        const isFirst = activeIndex === 0; // 자기소개서.jpg
        const isSecond = activeIndex === 1; // 자기소개서1.jpg
        const isLast = activeIndex === slides.length - 1; // 마지막.jpg

        // 첫 번째: 둘 다 숨김, 마지막: 둘 다 숨김, 두 번째: 왼쪽만 숨김
        if (aboutLeftArrow)
          aboutLeftArrow.style.display =
            isFirst || isSecond || isLast ? "none" : "";
        if (aboutRightArrow)
          aboutRightArrow.style.display = isFirst || isLast ? "none" : "";
      }

      if (imwhatotherseeBtn) {
        imwhatotherseeBtn.addEventListener("click", () => {
          const slides = aboutSection.querySelectorAll(".slide");
          slides.forEach((s) => s.classList.remove("active"));
          slides[1].classList.add("active");
          updateAboutArrows();
        });
      }

      // 기존 슬라이더 로직에 화살표 업데이트 연결
      aboutArrows.forEach((arrow) => {
        arrow.addEventListener("click", () => {
          setTimeout(updateAboutArrows, 10);
        });
      });

      // === 포트폴리오 더보기 버튼 (팝업) ===
      const portfolioReadmoreBtns = document.querySelectorAll(
        ".portfolio-readmore-btn",
      );
      const popupModal = document.getElementById("popup-modal");
      const popupOverlay = document.querySelector(".popup-overlay");
      const popupClose = document.querySelector(".popup-close");
      const popupImg = document.querySelector(".popup-content img");

      const popupImages = {
        1: "image/1.jpg",
        3: "image/2.jpg",
        4: "image/3.jpg",
        5: "image/4.jpg",
        6: "image/5.jpg",
        7: "image/6.jpg",
      };

      portfolioReadmoreBtns.forEach((btn) => {
        btn.addEventListener("click", () => {
          const popupId = btn.getAttribute("data-popup");
          if (popupImages[popupId]) {
            popupImg.src = popupImages[popupId];
          }
          popupModal.classList.add("active");
        });
      });

      if (popupClose) {
        popupClose.addEventListener("click", () => {
          popupModal.classList.remove("active");
        });
      }
      if (popupOverlay) {
        popupOverlay.addEventListener("click", () => {
          popupModal.classList.remove("active");
        });
      }

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && popupModal.classList.contains("active")) {
          popupModal.classList.remove("active");
        }
      });
    </script>
  </body>
</html>
